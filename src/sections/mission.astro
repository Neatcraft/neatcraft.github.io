---
import {css} from "../../styled-system/css";
import Subtitle from "../components/subtitle.astro";
import Button from "../components/button.astro";
import {paragraph, section, title} from "../../styled-system/patterns";
import SectionTitle from "../components/sectionTitle.astro";

---
<section id="mission"
         class={section({marginTop: "7vh", gap: "4%"})}>
    <img id="logo-neatcraft-mission"
            alt="Logo de Neatcraft: tête de cerf dans un cercle orange"
         class={css({
             display: {xs: "none", md: "block"},
             height: {xs: "15vh", md: "30vh", xl: "60vh"},
             width: {xs: "15vh", md: "30vh", xl: "60vh"},
         })}
         src="/img/logos/neatcraft.svg"/>
    <div class={css({
        display: "flex",
        flexDir: "column",
    })}>
        <SectionTitle iconSrc="/img/icons/target.svg" titleClass={title({color: "white"})}>Notre mission</SectionTitle>
        <Subtitle>
            Créer des solutions innovantes au service de votre business.
        </Subtitle>
        <p class={paragraph({color: "white"})}>
            Nous cherchons tous à être performants et atteindre nos objectifs, mais dans un monde incertain et mouvant il est difficile d'y arriver.
            <br/>
            C'est pour cela que nous nous inspirons des meilleures méthodes existantes pour <b>construire des solutions innovantes qui répondent à vos besoins</b>.
        </p>
    </div>
</section>

<script lang="ts">

    document.addEventListener("DOMContentLoaded", () => {
        document.addEventListener("scroll", () => {
            const logo = document.getElementById("logo-neatcraft-mission");
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            const path = new Path2D();



            if (window.scrollY > 100) {
                path.createImageBitmap(logo, {
                    resizeWidth: logo.width - 100,
                    resizeHeight: logo.height - 100,
                });
            } else {
                path.createImageBitmap(logo, {
                    resizeWidth: logo.width + 100,
                    resizeHeight: logo.height + 100,
                });
            }
            canvas.getContext("2d").fill(path);
            logo.src = canvas.toDataURL();
        });

        document.getElementById("logo-neatcraft-mission");
    });

</script>